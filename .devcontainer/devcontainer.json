{
  "name": "Native Web Servers Environment",
  "image": "ubuntu:22.04",

  "forwardPorts": [8080, 8081, 8082, 8443, 8444, 8445, 22],

  "portsAttributes": {
    "8080": { "label": "Apache HTTP", "onAutoForward": "notify", "visibility": "public", "protocol": "http" },
    "8081": { "label": "Nginx HTTP",  "onAutoForward": "notify", "visibility": "public", "protocol": "http" },
    "8082": { "label": "Tomcat HTTP", "onAutoForward": "notify", "visibility": "public", "protocol": "http" },
    "8443": { "label": "Apache HTTPS","onAutoForward": "notify", "visibility": "public", "protocol": "https" },
    "8444": { "label": "Nginx HTTPS", "onAutoForward": "notify", "visibility": "public", "protocol": "https" },
    "8445": { "label": "Tomcat HTTPS","onAutoForward": "notify", "visibility": "public", "protocol": "https" },
    "22":   { "label": "SSH",          "onAutoForward": "notify", "visibility": "private" }
  },

  "otherPortsAttributes": {
    "visibility": "public"
  },

  "postCreateCommand": "apt-get update && apt-get install -y sudo curl wget iproute2 net-tools && chmod +x *.sh .devcontainer/*.sh && .devcontainer/setup.sh",
  "postStartCommand": "echo 'Use ./manage-services.sh to manage your web servers!'",

  "customizations": {
    "vscode": {
      "extensions": ["ms-vscode.vscode-json","redhat.vscode-yaml","ms-vscode.powershell","github.copilot"],
      "settings": { "terminal.integrated.defaultProfile.linux": "bash", "files.eol": "\n" }
    }
  },

  "remoteUser": "root",
  "workspaceMount": "source=${localWorkspaceFolder},target=/workspaces/${localWorkspaceFolderBasename},type=bind",
  "workspaceFolder": "/workspaces/${localWorkspaceFolderBasename}",
  "onCreateCommand": "echo 'Setting up native web servers environment...'",

  "remoteEnv": { "WORKSPACE_NAME": "lnxservers", "AUTO_INSTALL": "true" }
}
